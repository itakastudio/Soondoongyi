<!DOCTYPE html>
<html>
  <head>
    <title>Soondoongyi Order Matching Automation</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.5.3/dist/css/bootstrap.min.css"
    />
    
    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1 class="mb-4">Soondoongyi Order Matching Automation</h1>
      <form id="myForm" method="post">
      <div class="row mb-3">
        <div class="col">
          <img
            src="images/google-sheet-logo.png"
            alt="Google Logo"
            class="logo-image"
          />
          <label for="sheetLink">Please input Google Sheet Link:</label>
          <div class="input-group">
            <input
              type="text"
              id="sheetLink"
              name="sheetLink"
              placeholder="Enter Google Sheet Link"
            />
            <div class="input-group-append">
              <span class="input-group-text"> </span>
            </div>
          </div>
        </div>
        
        
        <h1 id="testinging">I want to change this</h1>

        <% if (locals.response) { %>
              <p id="step1Status"><%= response %></p>
          <% } else {%>
            <p> Please paste google sheet link and process step 1 first</p>
            <p> 確保權限已開放為 editable</p>
            <p> completed p1 的 Quantity 不能有小數點，Total Cost 為 Plain Text 加 2 decimal places</p>
            <p> xero p1 的 Quantity 不能有小數點，unit price 為 Plain Text 加 2 decimal places</p>
            <p> completed p1 及 xero p1 為純粹訂單資料，月份間的 subtotal 等等資訊請刪去</p>
            <% } %>


              <!-- eventSource.addEventListener("error", (error) => {
                // Handle SSE error
                console.error("SSE error:", error);
              });
            
              eventSource.addEventListener("end", () => {
                // Handle SSE connection ended
                console.log("SSE connection ended");
              });
            </script> -->
       
        <div class="row">
          <div class="col">
            <div class="d-grid gap-2">
              <button id="step1Button" type="submit" class="btn btn-primary mb-2" formaction="/step1">
                Step 1
              </button>
              <button id="step2Button" type="submit" class="btn btn-primary mb-2" formaction="/step2">
                Step 2
              </button>
              <button id="step3Button" type="submit" class="btn btn-primary mb-2" formaction="/step3">
                Step 3
              </button>
              <button id="step4Button" type="submit" class="btn btn-primary mb-2" formaction="/step4">
                Step 4
              </button>
            </div>
          </div>
        </div>
      </form>
      </div>

    <!-- <script src="script.js"></script> -->
    <script src="index.js" charset="utf-8"></script>


    <!-- <script>
      const eventSource = new EventSource("/step3");

      eventSource.addEventListener("message", (event) => {
        const message = event.data;
        console.log(message);
        document.getElementById("testinging").textContent = message;
      });

      eventSource.addEventListener("error", (error) => {
        console.error("SSE error:", error);
      });

      eventSource.addEventListener("end", () => {
        console.log("SSE connection ended");
      });
    </script> -->

  </body>
</html>
